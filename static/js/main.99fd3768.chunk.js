(this.webpackJsonpstocks=this.webpackJsonpstocks||[]).push([[0],{330:function(e,t,r){"use strict";r.r(t);var n=r(6),c=r(0),a=r(25),i=r.n(a),s=r(87),d=r.n(s),l=r(66),o=r(120),u=r(49),j=r(334),b=r(85),h=r(337),p=r(338),x=r(73),f=r(29),g=r(80),O=r.n(g),y=r(174),v=r(335),m=r(336),w=r(332),k="https://script.google.com/a/uw.edu/macros/s/AKfycbzdeg0uAW8TFykGSnDPjMxYhAayyAfcQEnuByZm7ykEKiXJbdk/exec",S=[{title:"\u884c\u70ba",dataIndex:"action",key:"action",align:"right",width:100,render:function(e,t,r){var c,a={textAlign:"right"};"buy"===e?(a.color="red",c="\u8cb7"):"sell"===e&&(a.color="green",c="\u8ce3");var i=new Date(t.current.date);return new Date(t.predict.date)<i&&(a.color="gray"),Object(n.jsx)("p",{style:a,children:Object(n.jsx)("span",{children:c})})}},{title:"\u6f32\u901f(\u9031)",dataIndex:"speed",key:"speed",align:"right",width:100,render:function(e,t,r){var c,a,i=t.predict.price-t.current.price,s=(new Date(t.predict.date)-new Date(t.current.date))/864e5;s<=0?(c=0,a=0):(c=Math.round(i/(s/7*5)*100)/100,a=Math.round(c/s*1e4)/100);var d={textAlign:"right"},l=new Date(t.current.date);return new Date(t.predict.date)<l&&(d.color="gray"),Object(n.jsxs)("p",{style:d,children:[Object(n.jsxs)("span",{children:[a,"%"]}),Object(n.jsx)("br",{}),Object(n.jsx)("small",{children:c})]})},defaultSortOrder:"descend",sorter:function(e,t){var r=new Date(e.current.date),n=new Date(e.predict.date),c=new Date(t.predict.date);if(n<=r&&c<=r)return n-c;if(n<=r)return-1;if(c<=r)return 1;var a=e.predict.price-e.current.price,i=(new Date(e.predict.date)-new Date(e.current.date))/864e5,s=Math.round(a/(i/7*5)*100)/100/i,d=t.predict.price-t.current.price,l=(new Date(t.predict.date)-new Date(t.current.date))/864e5;return s-Math.round(d/(l/7*5)*100)/100/l}},{title:"\u7372\u5229\u7a7a\u9593",dataIndex:"gain",key:"gain",align:"right",width:100,render:function(e,t,r){var c={textAlign:"right"},a=new Date(t.current.date);return new Date(t.predict.date)<a&&(c.color="gray"),Object(n.jsxs)("p",{style:c,children:[Object(n.jsx)("span",{children:t.gain.price}),Object(n.jsx)("br",{}),Object(n.jsx)("small",{children:t.gain.percentage})]})},sorter:function(e,t){var r=new Date(e.current.date),n=new Date(e.predict.date),c=new Date(t.predict.date);return n<=r&&c<=r?n-c:n<=r?-1:c<=r?1:e.gain.price-t.gain.price}},{title:"\u8d77\u6f32\u9ede",dataIndex:"start",key:"start",align:"right",width:100,render:function(e,t,r){var c={textAlign:"right"},a=new Date(t.current.date);return new Date(t.predict.date)<a&&(c.color="gray"),Object(n.jsxs)("p",{style:c,children:[Object(n.jsx)("span",{children:t.start.price}),Object(n.jsx)("br",{}),Object(n.jsx)("small",{children:t.start.date})]})}},{title:"\u4e2d\u9593\u503c",dataIndex:"middle",key:"middle",align:"right",width:100,render:function(e,t,r){var c={textAlign:"right"},a=new Date(t.current.date);return new Date(t.predict.date)<a&&(c.color="gray"),Object(n.jsxs)("p",{style:c,children:[Object(n.jsx)("span",{children:t.middle.price}),Object(n.jsx)("br",{}),Object(n.jsxs)("small",{children:["(",t.middle.difference.points,", ",t.middle.difference.percentage,"%)"]}),Object(n.jsx)("br",{}),Object(n.jsx)("small",{children:t.middle.date})]})}},{title:"\u76ee\u6a19\u50f9",dataIndex:"predict",key:"predict",align:"right",width:100,render:function(e,t,r){var c=new Date(t.current.date),a={};return new Date(t.predict.date)<c&&(a.color="gray"),Object(n.jsxs)("p",{style:a,children:[Object(n.jsx)("span",{children:t.predict.price}),Object(n.jsx)("br",{}),Object(n.jsx)("small",{children:t.predict.date})]})},sorter:function(e,t){return e.predict.price-t.predict.price}}],D={new:"\u4eca\u65e5\u65b0\u589e",hold:"\u6301\u6709",alert:"\u8b66\u6212",temp:"\u89c0\u5bdf"};function A(){var e=Object(f.f)(),t=e.country,r=e.symbol,a=Object(c.useState)({}),i=Object(u.a)(a,2),s=i[0],d=i[1],l=Object(c.useState)([]),o=Object(u.a)(l,2),b=o[0],h=o[1],p=Object(c.useState)([]),x=Object(u.a)(p,2),g=x[0],y=x[1];Object(c.useEffect)((function(){O()({url:k,params:{mode:"single",country:t.toUpperCase(),symbol:r.toUpperCase()}}).then((function(e){return e.data})).then((function(e){if(console.log(e),e.error)return console.error(e.error),Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Sorry, we don't have this stock in our database."}),Object(n.jsx)("h2",{children:"Please try other stocks. Thank you!"})]});document.title="".concat(r," - ").concat(e.fullName," | Stocks"),d(e.profile),h(e.data.old),y(e.data.current)})).catch((function(e){console.error(e),j.b.error("Unable to fetch data. Please try again later.")}))}),[t,r]);var D=Object(n.jsxs)(n.Fragment,{children:[s.fullName," (",r,")"," ",Object(n.jsx)(v.a,{count:1,onChange:function(e){var t=localStorage.getItem("favorite"),n=t?JSON.parse(t):{},c=n||[];if(0===e){var a=c.indexOf(r);a>-1&&c.splice(a,1)}else c.push(r);localStorage.setItem("favorite",JSON.stringify(n))}})]});return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:Object(n.jsx)(m.a,{title:D,children:Object(n.jsx)(m.a.Item,{label:"\u6e96\u78ba\u7387"})})}),Object(n.jsx)("div",{children:Object(n.jsx)(w.a,{columns:S,dateSource:g})}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"\u904e\u5f80\u7d00\u9304"}),Object(n.jsx)(w.a,{columns:I,dateSource:b})]})]})}var I=[{title:"\u7372\u5229",dataIndex:"gain",key:"gain",align:"right",width:100,render:function(e,t,r){var c={textAlign:"right"};return t.success?c.color="red":c.color="green",Object(n.jsxs)("p",{style:c,children:[Object(n.jsxs)("span",{children:[t.gain.price>0?"+":"",t.gain.price]}),Object(n.jsx)("br",{}),Object(n.jsxs)("small",{children:[t.gain.price>0?"+":"",t.gain.percentage]})]})}},{title:"\u8cb7\u9ede",dataIndex:"notifyBuy",key:"notifyBuy",align:"right",width:100,defaultSortOrder:"descend",render:function(e,t,r){return Object(n.jsxs)("p",{style:{textAlign:"right"},children:[Object(n.jsx)("span",{children:t.notifyBuy.price}),Object(n.jsx)("br",{}),Object(n.jsx)("small",{children:t.notifyBuy.date})]})},sorter:function(e,t){return new Date(e.notifyBuy.date)-new Date(t.notifyBuy.date)}},{title:"\u8ce3\u9ede",dataIndex:"notifySell",key:"notifySell",align:"right",width:100,render:function(e,t,r){return Object(n.jsxs)("p",{style:{textAlign:"right"},children:[Object(n.jsx)("span",{children:t.notifySell.price}),Object(n.jsx)("br",{}),Object(n.jsx)("small",{children:t.notifySell.date})]})}},{title:"\u8d77\u6f32\u9ede",dataIndex:"start",key:"start",align:"right",width:100,render:function(e,t,r){return Object(n.jsxs)("p",{style:{textAlign:"right"},children:[Object(n.jsx)("span",{children:t.start.price}),Object(n.jsx)("br",{}),Object(n.jsx)("small",{children:t.start.date})]})}},{title:"\u4e2d\u9593\u503c",dataIndex:"middle",key:"middle",align:"right",width:100,render:function(e,t,r){return Object(n.jsxs)("p",{style:{textAlign:"right"},children:[Object(n.jsx)("span",{children:t.middle.price}),Object(n.jsx)("br",{}),Object(n.jsxs)("span",{children:[t.middle.difference.percentage,"%"]}),Object(n.jsx)("br",{}),Object(n.jsx)("small",{children:t.middle.date})]})}},{title:"\u76ee\u6a19\u50f9",dataIndex:"predict",key:"predict",align:"right",width:100,render:function(e,t,r){var c=new Date(t.current.date),a={};return new Date(t.predict.date)<c&&(a.color="red"),Object(n.jsxs)("p",{style:{textAlign:"right"},children:[Object(n.jsx)("span",{children:t.predict.price}),Object(n.jsx)("br",{}),Object(n.jsx)("small",{style:a,children:t.predict.date})]})},sorter:function(e,t){return e.predict.price-t.predict.price}}],N=r(50),C=r(333);function M(e){var t=e.stockData,r=Object(c.useState)([]),a=Object(u.a)(r,2),i=a[0],s=a[1],d=C.a.TabPane;return Object(c.useEffect)((function(){var e=[];for(var r in t){var n=[],c=t[r],a={},i=c[Object.keys(c)[0]].data;for(var d in i)a[d]=[];for(var l in c){var o=c[l].fullName,u=c[l].data;for(var j in u){var b=u[j];b.length>0&&a[j].push({key:a[j].length,exchanges:r,stock:l,fullName:o,subDataSource:b})}}for(var h in a)n.push({tabName:D[h]||h,dataSource:a[h]});e.push({exchanges:r,subTabs:n})}console.log(e),s(e)}),[t]),Object(n.jsx)(C.a,{defaultActiveKey:"0",children:i.map((function(e,t){return Object(n.jsx)(d,{tab:e.exchanges,children:Object(n.jsx)(C.a,{defaultActiveKey:"0",children:e.subTabs.map((function(e,t){return Object(n.jsx)(d,{tab:e.tabName,children:Object(n.jsx)("div",{style:{margin:"auto"},children:Object(n.jsx)(w.a,{size:"small",columns:L,bordered:!0,dataSource:e.dataSource,pagination:{defaultPageSize:20,hideOnSinglePage:!0},expandable:{expandedRowRender:E,expandRowByClick:!0},scroll:{x:600}},t)})},t)}))})},t)}))})}var E=function(e){for(var t=[],r=0;r<e.subDataSource.length;r++){var c=e.subDataSource[r];t.push(Object(l.a)({key:r,stock:e.stock,buy:{price:0,date:"12/12/2020"}},c))}return console.log(t),Object(n.jsx)("div",{style:{margin:"10px 0px"},children:Object(n.jsx)(w.a,{size:"small",columns:S,dataSource:t,bordered:!0,pagination:{defaultPageSize:20,hideOnSinglePage:!0},scroll:{x:600}})})},L=[{title:"\u80a1\u7968",dataIndex:"stock",key:"stock",ellipsis:!0,width:100,fixed:"left",render:function(e,t,r){var c=t.subDataSource,a={color:"green"},i=t.fullName,s=c[0].current.difference.points,d=c[0].current.difference.percentage+"%";return s>0&&(s="+".concat(s),d="+".concat(d),a.color="red"),Object(n.jsxs)("p",{children:[Object(n.jsxs)(x.b,{to:"/".concat(t.country,"/").concat(t.stock),children:[e.padEnd(6)," ",Object(n.jsxs)("span",{children:[" - ",i]})]}),Object(n.jsx)("br",{}),Object(n.jsxs)("span",{style:a,children:["$",c[0].current.price," (",s,", ",d,")"]})]})},sorter:function(e,t){return e.stock-t.stock}},{title:"\u884c\u70ba",dataIndex:"action",key:"action",align:"right",width:100,render:function(e,t,r){var c,a=t.subDataSource,i="\u8cb7",s={color:"red"},d=Object(N.a)(a);try{for(d.s();!(c=d.n()).done;){if("sell"===c.value.action){i="\u8ce3",s.color="green";break}}}catch(l){d.e(l)}finally{d.f()}return Object(n.jsx)("p",{style:s,children:Object(n.jsx)("span",{children:i})})}},{title:"\u6700\u5927\u6f32\u901f(\u9031)",dataIndex:"speed",key:"speed",align:"right",width:100,render:function(e,t,r){var c,a=t.subDataSource,i=0,s=0,d=Object(N.a)(a);try{for(d.s();!(c=d.n()).done;){var l=c.value,o=l.predict.price-l.current.price,u=new Date(l.predict.date)-new Date(l.current.date);if(!(u<=0)){var j=u/864e5,b=Math.round(o/(j/7*5)*100)/100,h=Math.round(b/j*1e4)/100;h>s&&(s=h,i=b)}}}catch(p){d.e(p)}finally{d.f()}return Object(n.jsxs)("p",{children:[Object(n.jsxs)("span",{children:[s,"%"]}),Object(n.jsx)("br",{}),Object(n.jsx)("small",{children:i})]})},defaultSortOrder:"descend",sorter:function(e,t){var r,n=e.subDataSource,c=0,a=Object(N.a)(n);try{for(a.s();!(r=a.n()).done;){var i=r.value,s=i.predict.price-i.current.price,d=new Date(i.predict.date)-new Date(i.current.date);if(!(d<=0)){var l=d/864e5,o=s/(l/7*5)/l;o>c&&(c=o)}}}catch(y){a.e(y)}finally{a.f()}var u,j=t.subDataSource,b=0,h=Object(N.a)(j);try{for(h.s();!(u=h.n()).done;){var p=u.value,x=p.predict.price-p.current.price,f=new Date(p.predict.date)-new Date(p.current.date);if(!(f<=0)){var g=f/864e5,O=x/(g/7*5)/g;O>b&&(b=O)}}}catch(y){h.e(y)}finally{h.f()}return c-b}},{title:"\u7372\u5229\u7a7a\u9593",dataIndex:"gain",key:"gain",align:"right",width:100,render:function(e,t,r){var c,a=t.subDataSource,i=a[0].gain.price,s=a[0].gain.percentage,d=a[0].gain.price,l=a[0].gain.percentage,o=Object(N.a)(a);try{for(o.s();!(c=o.n()).done;){var u=c.value;u.gain.price<i&&(i=u.gain.price,s=u.gain.percentage),u.gain.price>d&&(d=u.gain.price,l=u.gain.percentage)}}catch(h){o.e(h)}finally{o.f()}var j=i===d?i:"".concat(i," - ").concat(d),b=s===l?s:"".concat(s," - ").concat(l);return Object(n.jsxs)("p",{children:[Object(n.jsxs)("span",{children:[j," "]}),Object(n.jsx)("br",{}),Object(n.jsxs)("small",{children:[b," "]})]})},sorter:function(e,t){var r,n=e.subDataSource,c=n[0].gain.price,a=n[0].gain.price,i=new Date(n[0].current.date),s=Object(N.a)(n);try{for(s.s();!(r=s.n()).done;){var d=r.value;new Date(d.predict.date)<=i||(c=Math.min(d.gain.price,c),a=Math.max(d.gain.price,a))}}catch(p){s.e(p)}finally{s.f()}var l,o=t.subDataSource,u=o[0].gain.price,j=o[0].gain.price,b=Object(N.a)(o);try{for(b.s();!(l=b.n()).done;){var h=l.value;new Date(h.predict.date)<=i||(u=Math.min(h.gain.price,u),j=Math.max(h.gain.price,j))}}catch(p){b.e(p)}finally{b.f()}return a-j}},{title:"\u76ee\u6a19\u50f9",dataIndex:"predict",key:"predict",align:"right",width:100,render:function(e,t,r){var c,a=t.subDataSource,i=a[0].predict.price,s=a[0].predict.date,d=a[0].predict.price,l=a[0].predict.date,o=Object(N.a)(a);try{for(o.s();!(c=o.n()).done;){var u=c.value;u.predict.price<i&&(i=u.predict.price,s=u.predict.date),u.predict.price>d&&(d=u.predict.price,l=u.predict.date)}}catch(h){o.e(h)}finally{o.f()}var j=i===d?i:"".concat(i," - ").concat(d),b=i===d?s:"".concat(s," - ").concat(l);return Object(n.jsxs)("p",{children:[Object(n.jsxs)("span",{children:[j," "]}),Object(n.jsx)("br",{}),Object(n.jsxs)("small",{children:[b," "]})]})}}];var P=function(){var e=b.a.Option,t=Object(c.useState)([]),r=Object(u.a)(t,2),a=r[0],i=r[1];Object(c.useEffect)((function(){s()}),[]);var s=function(){var e=Object(o.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O()({url:k,params:{mode:"stock-list"}}).then((function(e){return e.data}));case 3:t=e.sent,console.log(t),i(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),j.b.error("Search Function will not work");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{style:{width:"100%"},children:Object(n.jsx)("div",{style:{width:"95%",margin:"auto"},children:Object(n.jsxs)(h.a,{children:[Object(n.jsxs)(p.a,{xs:24,sm:24,md:6,lg:6,xl:5,xxl:4,children:[Object(n.jsx)("h1",{children:Object(n.jsx)(x.b,{to:"/",style:{color:"black"},children:"Stocks"})})," "]}),Object(n.jsx)(p.a,{xs:0,sm:0,md:18,lg:18,xl:19,xxl:20,style:{textAlign:"right"},children:Object(n.jsx)(b.a,{showSearch:!0,defaultActiveFirstOption:!1,showArrow:!1,filterOption:function(e,t){return t.symbol.toLowerCase().indexOf(e.toLowerCase())>=0||t.fullName.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){var r=e.symbol.toLowerCase().localeCompare(t.symbol.toLowerCase());return 0!==r?r:e.fullName.toLowerCase().localeCompare(t.fullName.toLowerCase())},onSelect:function(e){window.location.href="/stocks/"+e},notFoundContent:null,placeholder:"Search...",style:{width:"250px",textAlign:"left"},children:a.map((function(t){return Object(n.jsxs)(e,{value:"".concat(t.country,"/").concat(t.symbol),children:[Object(n.jsx)("span",{children:t.symbol}),Object(n.jsx)("br",{}),Object(n.jsx)("small",{children:t.fullName})]},"".concat(t.country,"/").concat(t.symbol))}))})})]})})})},B=function(){var e=Object(c.useState)({}),t=Object(u.a)(e,2),r=t[0],a=t[1];Object(c.useEffect)((function(){i()}),[]);var i=function(){var e=Object(o.a)(d.a.mark((function e(){var t,r,n,c,i,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j.b.loading({content:"Loading...",key:"loading",duration:0}),e.next=4,O.a.get("https://docs.google.com/spreadsheets/u/1/d/e/2PACX-1vQGMwv4tEoSbTjgtSht6LZ5Vxlwb0Y4Lm1z5Pp0tuBcSaZE9AMTY_isyio7Sc-_C8LHsfv_xMptHeqA/pubhtml").then((function(e){return e.data})).then((function(e){return e}));case 4:t=e.sent,r=Object(y.a)(t),n=new Map,(c=r.querySelector("#sheets-viewport")).childNodes.forEach((function(e){n.set(e.id,{id:e.id,key:e.id})})),i=r.querySelector("#sheet-menu"),n.forEach((function(e,t){var r=i.querySelector("#sheet-button-".concat(t)).childNodes[0].innerText;n.set(t,Object(l.a)(Object(l.a)({},n.get(t)),{},{name:r}))})),s={},n.forEach((function(e,t){for(var r=c.querySelector("#".concat(t," table tbody")),n=1;r.childNodes.length-n>1;){var a=r.childNodes[r.childNodes.length-n],i=2;for(i=2;i<a.childNodes.length;i++){var d=a.childNodes[i].innerText.replace(/&quot;/g,'"');if(""===d)break;var o=JSON.parse(d);s[e.name]=Object(l.a)(Object(l.a)({},s[e.name]),o)}if(i>2)break;n++}})),a(s),j.b.success({content:"Finish loading",key:"loading",duration:.5}),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0),j.b.error("Something went wrong. Please try again later");case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{style:{padding:10},children:Object(n.jsxs)(x.a,{basename:"/stocks",children:[Object(n.jsx)(P,{}),Object(n.jsx)("div",{style:{width:"95%",margin:"auto"},children:Object(n.jsxs)(f.c,{children:[Object(n.jsx)(f.a,{exact:!0,path:"/:country/:symbol",component:A}),Object(n.jsx)(f.a,{exact:!0,path:"/",children:Object(n.jsx)(M,{stockData:r})})]})})]})})};r(328);i.a.render(Object(n.jsx)(B,{}),document.getElementById("root"))}},[[330,1,2]]]);
//# sourceMappingURL=main.99fd3768.chunk.js.map