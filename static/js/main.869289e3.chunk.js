(this.webpackJsonpstocks=this.webpackJsonpstocks||[]).push([[0],{330:function(e,t,r){"use strict";r.r(t);var c=r(6),n=r(0),a=r(25),i=r.n(a),s=r(87),d=r.n(s),l=r(66),o=r(120),u=r(46),j=r(334),b=r(85),p=r(337),h=r(338),x=r(73),g=r(29),f=r(80),O=r.n(f),y=r(174),v=r(335),m=r(336),w=r(332),k="https://script.google.com/a/uw.edu/macros/s/AKfycbzdeg0uAW8TFykGSnDPjMxYhAayyAfcQEnuByZm7ykEKiXJbdk/exec",S=[{title:"\u884c\u70ba",dataIndex:"action",key:"action",align:"right",width:100,render:function(e,t,r){var n,a={textAlign:"right"};"buy"===e?(a.color="red",n="\u8cb7"):"sell"===e&&(a.color="green",n="\u8ce3");var i=new Date(t.current.date);return new Date(t.predict.date)<i&&(a.color="gray"),Object(c.jsx)("p",{style:a,children:Object(c.jsx)("span",{children:n})})}},{title:"\u6f32\u901f(\u9031)",dataIndex:"speed",key:"speed",align:"right",width:100,render:function(e,t,r){var n,a,i=t.predict.price-t.current.price,s=(new Date(t.predict.date)-new Date(t.current.date))/864e5;s<=0?(n=0,a=0):(n=Math.round(i/(s/7*5)*100)/100,a=Math.round(n/s*1e4)/100);var d={textAlign:"right"},l=new Date(t.current.date);return new Date(t.predict.date)<l&&(d.color="gray"),Object(c.jsxs)("p",{style:d,children:[Object(c.jsxs)("span",{children:[a,"%"]}),Object(c.jsx)("br",{}),Object(c.jsx)("small",{children:n})]})},defaultSortOrder:"descend",sorter:function(e,t){var r=new Date(e.current.date),c=new Date(e.predict.date),n=new Date(t.predict.date);if(c<=r&&n<=r)return c-n;if(c<=r)return-1;if(n<=r)return 1;var a=e.predict.price-e.current.price,i=(new Date(e.predict.date)-new Date(e.current.date))/864e5,s=Math.round(a/(i/7*5)*100)/100/i,d=t.predict.price-t.current.price,l=(new Date(t.predict.date)-new Date(t.current.date))/864e5;return s-Math.round(d/(l/7*5)*100)/100/l}},{title:"\u7372\u5229\u7a7a\u9593",dataIndex:"gain",key:"gain",align:"right",width:100,render:function(e,t,r){var n={textAlign:"right"},a=new Date(t.current.date);return new Date(t.predict.date)<a&&(n.color="gray"),Object(c.jsxs)("p",{style:n,children:[Object(c.jsx)("span",{children:t.gain.price}),Object(c.jsx)("br",{}),Object(c.jsx)("small",{children:t.gain.percentage})]})},sorter:function(e,t){var r=new Date(e.current.date),c=new Date(e.predict.date),n=new Date(t.predict.date);return c<=r&&n<=r?c-n:c<=r?-1:n<=r?1:e.gain.price-t.gain.price}},{title:"\u8d77\u6f32\u9ede",dataIndex:"start",key:"start",align:"right",width:100,render:function(e,t,r){var n={textAlign:"right"},a=new Date(t.current.date);return new Date(t.predict.date)<a&&(n.color="gray"),Object(c.jsxs)("p",{style:n,children:[Object(c.jsx)("span",{children:t.start.price}),Object(c.jsx)("br",{}),Object(c.jsx)("small",{children:t.start.date})]})}},{title:"\u4e2d\u9593\u503c",dataIndex:"middle",key:"middle",align:"right",width:100,render:function(e,t,r){var n={textAlign:"right"},a=new Date(t.current.date);return new Date(t.predict.date)<a&&(n.color="gray"),Object(c.jsxs)("p",{style:n,children:[Object(c.jsx)("span",{children:t.middle.price}),Object(c.jsx)("br",{}),Object(c.jsxs)("small",{children:["(",t.middle.difference.points,", ",t.middle.difference.percentage,"%)"]}),Object(c.jsx)("br",{}),Object(c.jsx)("small",{children:t.middle.date})]})}},{title:"\u76ee\u6a19\u50f9",dataIndex:"predict",key:"predict",align:"right",width:100,render:function(e,t,r){var n=new Date(t.current.date),a={};return new Date(t.predict.date)<n&&(a.color="gray"),Object(c.jsxs)("p",{style:a,children:[Object(c.jsx)("span",{children:t.predict.price}),Object(c.jsx)("br",{}),Object(c.jsx)("small",{children:t.predict.date})]})},sorter:function(e,t){return e.predict.price-t.predict.price}}],D={new:"\u4eca\u65e5\u65b0\u589e",hold:"\u6301\u6709",alert:"\u8b66\u6212",temp:"\u89c0\u5bdf"};function A(){var e=Object(g.f)(),t=e.country,r=e.symbol,a=Object(n.useState)({fullName:"",accuracy:{success:0,total:0,percentage:""}}),i=Object(u.a)(a,2),s=i[0],d=i[1],l=Object(n.useState)([]),o=Object(u.a)(l,2),b=o[0],p=o[1],h=Object(n.useState)([]),x=Object(u.a)(h,2),f=x[0],y=x[1],D=Object(n.useState)({}),A=Object(u.a)(D,2),I=(A[0],A[1]);Object(n.useEffect)((function(){j.b.loading({content:"Loading...",key:"loading"}),O()({url:k,params:{mode:"single",country:t.toUpperCase(),symbol:r.toUpperCase()}}).then((function(e){return e.data})).then((function(e){console.log(e),e.error&&(console.error(e.error),I({error:Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Sorry, we don't have this stock in our database."}),Object(c.jsx)("h2",{children:"Please try other stocks."})]})})),document.title="".concat(r," - ").concat(e.fullName," | Stocks"),d(e.profile),p(e.data.old),y(e.data.current),j.b.success({content:"Finished",key:"loading"})})).catch((function(e){console.error(e),j.b.error("Unable to fetch data. Please try again later.")}))}),[t,r]);var C=Object(c.jsxs)(c.Fragment,{children:[s.fullName," (",r,")"," ",Object(c.jsx)(v.a,{count:1,onChange:function(e){var t=localStorage.getItem("favorite"),c=t?JSON.parse(t):{},n=c||[];if(0===e){var a=n.indexOf(r);a>-1&&n.splice(a,1)}else n.push(r);localStorage.setItem("favorite",JSON.stringify(c))}})]});return Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{children:Object(c.jsx)(m.a,{title:C,children:Object(c.jsxs)(m.a.Item,{label:"\u6e96\u78ba\u7387",children:[s.accuracy.percentage,"% (",s.accuracy.success," /"," ",s.accuracy.total,")"]})})}),Object(c.jsx)("div",{children:Object(c.jsx)(w.a,{columns:S,dateSource:f})}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"\u904e\u5f80\u7d00\u9304"}),Object(c.jsx)(w.a,{columns:N,dateSource:b})]})]})}var N=[{title:"\u7372\u5229",dataIndex:"gain",key:"gain",align:"right",width:100,render:function(e,t,r){var n={textAlign:"right"};return t.success?n.color="red":n.color="green",Object(c.jsxs)("p",{style:n,children:[Object(c.jsxs)("span",{children:[t.gain.price>0?"+":"",t.gain.price]}),Object(c.jsx)("br",{}),Object(c.jsxs)("small",{children:[t.gain.price>0?"+":"",t.gain.percentage]})]})}},{title:"\u8cb7\u9ede",dataIndex:"buy",key:"buy",align:"right",width:100,defaultSortOrder:"descend",render:function(e,t,r){return Object(c.jsxs)("p",{style:{textAlign:"right"},children:[Object(c.jsx)("span",{children:t.buy.price}),Object(c.jsx)("br",{}),Object(c.jsx)("small",{children:t.buy.date})]})},sorter:function(e,t){return new Date(e.buy.date)-new Date(t.buy.date)}},{title:"\u8ce3\u9ede",dataIndex:"sell",key:"sell",align:"right",width:100,render:function(e,t,r){return Object(c.jsxs)("p",{style:{textAlign:"right"},children:[Object(c.jsx)("span",{children:t.sell.price}),Object(c.jsx)("br",{}),Object(c.jsx)("small",{children:t.sell.date})]})}},{title:"\u8d77\u6f32\u9ede",dataIndex:"start",key:"start",align:"right",width:100,render:function(e,t,r){return Object(c.jsxs)("p",{style:{textAlign:"right"},children:[Object(c.jsx)("span",{children:t.start.price}),Object(c.jsx)("br",{}),Object(c.jsx)("small",{children:t.start.date})]})}},{title:"\u4e2d\u9593\u503c",dataIndex:"middle",key:"middle",align:"right",width:100,render:function(e,t,r){return Object(c.jsxs)("p",{style:{textAlign:"right"},children:[Object(c.jsx)("span",{children:t.middle.price}),Object(c.jsx)("br",{}),Object(c.jsxs)("span",{children:[t.middle.difference.percentage,"%"]}),Object(c.jsx)("br",{}),Object(c.jsx)("small",{children:t.middle.date})]})}},{title:"\u76ee\u6a19\u50f9",dataIndex:"predict",key:"predict",align:"right",width:100,render:function(e,t,r){var n=new Date(t.current.date),a={};return new Date(t.predict.date)<n&&(a.color="red"),Object(c.jsxs)("p",{style:{textAlign:"right"},children:[Object(c.jsx)("span",{children:t.predict.price}),Object(c.jsx)("br",{}),Object(c.jsx)("small",{style:a,children:t.predict.date})]})},sorter:function(e,t){return e.predict.price-t.predict.price}}],I=r(50),C=r(333);function E(e){var t=e.stockData,r=Object(n.useState)([]),a=Object(u.a)(r,2),i=a[0],s=a[1],d=C.a.TabPane,l={TPE:"TW",NASDAQ:"US",NYSE:"US"};return Object(n.useEffect)((function(){var e=[];for(var r in t){var c=[],n=t[r],a={},i=n[Object.keys(n)[0]].data;for(var d in i)a[d]=[];for(var o in n){var u=n[o].fullName,j=n[o].data;for(var b in j){var p=j[b];p.length>0&&a[b].push({key:a[b].length,country:l[r],stock:o,fullName:u,subDataSource:p})}}for(var h in a)c.push({tabName:D[h]||h,dataSource:a[h]});e.push({exchanges:r,subTabs:c})}s(e)}),[t]),Object(c.jsx)(C.a,{defaultActiveKey:"0",children:i.map((function(e,t){return Object(c.jsx)(d,{tab:e.exchanges,children:Object(c.jsx)(C.a,{defaultActiveKey:"0",children:e.subTabs.map((function(e,t){return Object(c.jsx)(d,{tab:e.tabName,children:Object(c.jsx)("div",{style:{margin:"auto"},children:Object(c.jsx)(w.a,{size:"small",columns:L,bordered:!0,dataSource:e.dataSource,pagination:{defaultPageSize:20,hideOnSinglePage:!0},expandable:{expandedRowRender:M,expandRowByClick:!0},scroll:{x:600}},t)})},t)}))})},t)}))})}var M=function(e){for(var t=[],r=0;r<e.subDataSource.length;r++){var n=e.subDataSource[r];t.push(Object(l.a)({key:r,stock:e.stock,buy:{price:0,date:"12/12/2020"}},n))}return console.log(t),Object(c.jsx)("div",{style:{margin:"10px 0px"},children:Object(c.jsx)(w.a,{size:"small",columns:S,dataSource:t,bordered:!0,pagination:{defaultPageSize:20,hideOnSinglePage:!0},scroll:{x:600}})})},L=[{title:"\u80a1\u7968",dataIndex:"stock",key:"stock",ellipsis:!0,width:100,fixed:"left",render:function(e,t,r){var n=t.subDataSource,a={},i=t.fullName,s=n[0].current.difference.points,d=n[0].current.difference.percentage+"%";return s>0&&(a.color="red"),s>=0?(s="+".concat(s),d="+".concat(d)):s<0&&(a.color="green"),Object(c.jsxs)("p",{children:[Object(c.jsxs)(x.b,{to:"/".concat(t.country,"/").concat(t.stock),children:[e.padEnd(6)," ",Object(c.jsxs)("span",{children:[" - ",i]})]}),Object(c.jsx)("br",{}),Object(c.jsxs)("span",{style:a,children:["$",n[0].current.price," (",s,", ",d,")"]})]})},sorter:function(e,t){return e.stock-t.stock}},{title:"\u884c\u70ba",dataIndex:"action",key:"action",align:"right",width:100,render:function(e,t,r){var n,a=t.subDataSource,i="\u8cb7",s={color:"red"},d=Object(I.a)(a);try{for(d.s();!(n=d.n()).done;){if("sell"===n.value.action){i="\u8ce3",s.color="green";break}}}catch(l){d.e(l)}finally{d.f()}return Object(c.jsx)("p",{style:s,children:Object(c.jsx)("span",{children:i})})}},{title:"\u6700\u5927\u6f32\u901f(\u9031)",dataIndex:"speed",key:"speed",align:"right",width:100,render:function(e,t,r){var n,a=t.subDataSource,i=0,s=0,d=Object(I.a)(a);try{for(d.s();!(n=d.n()).done;){var l=n.value,o=l.predict.price-l.current.price,u=new Date(l.predict.date)-new Date(l.current.date);if(!(u<=0)){var j=u/864e5,b=Math.round(o/(j/7*5)*100)/100,p=Math.round(b/j*1e4)/100;p>s&&(s=p,i=b)}}}catch(h){d.e(h)}finally{d.f()}return Object(c.jsxs)("p",{children:[Object(c.jsxs)("span",{children:[s,"%"]}),Object(c.jsx)("br",{}),Object(c.jsx)("small",{children:i})]})},defaultSortOrder:"descend",sorter:function(e,t){var r,c=e.subDataSource,n=0,a=Object(I.a)(c);try{for(a.s();!(r=a.n()).done;){var i=r.value,s=i.predict.price-i.current.price,d=new Date(i.predict.date)-new Date(i.current.date);if(!(d<=0)){var l=d/864e5,o=s/(l/7*5)/l;o>n&&(n=o)}}}catch(y){a.e(y)}finally{a.f()}var u,j=t.subDataSource,b=0,p=Object(I.a)(j);try{for(p.s();!(u=p.n()).done;){var h=u.value,x=h.predict.price-h.current.price,g=new Date(h.predict.date)-new Date(h.current.date);if(!(g<=0)){var f=g/864e5,O=x/(f/7*5)/f;O>b&&(b=O)}}}catch(y){p.e(y)}finally{p.f()}return n-b}},{title:"\u7372\u5229\u7a7a\u9593",dataIndex:"gain",key:"gain",align:"right",width:100,render:function(e,t,r){var n,a=t.subDataSource,i=a[0].gain.price,s=a[0].gain.percentage,d=a[0].gain.price,l=a[0].gain.percentage,o=Object(I.a)(a);try{for(o.s();!(n=o.n()).done;){var u=n.value;u.gain.price<i&&(i=u.gain.price,s=u.gain.percentage),u.gain.price>d&&(d=u.gain.price,l=u.gain.percentage)}}catch(p){o.e(p)}finally{o.f()}var j=i===d?i:"".concat(i," - ").concat(d),b=s===l?s:"".concat(s," - ").concat(l);return Object(c.jsxs)("p",{children:[Object(c.jsxs)("span",{children:[j," "]}),Object(c.jsx)("br",{}),Object(c.jsxs)("small",{children:[b," "]})]})},sorter:function(e,t){var r,c=e.subDataSource,n=c[0].gain.price,a=c[0].gain.price,i=new Date(c[0].current.date),s=Object(I.a)(c);try{for(s.s();!(r=s.n()).done;){var d=r.value;new Date(d.predict.date)<=i||(n=Math.min(d.gain.price,n),a=Math.max(d.gain.price,a))}}catch(h){s.e(h)}finally{s.f()}var l,o=t.subDataSource,u=o[0].gain.price,j=o[0].gain.price,b=Object(I.a)(o);try{for(b.s();!(l=b.n()).done;){var p=l.value;new Date(p.predict.date)<=i||(u=Math.min(p.gain.price,u),j=Math.max(p.gain.price,j))}}catch(h){b.e(h)}finally{b.f()}return a-j}},{title:"\u76ee\u6a19\u50f9",dataIndex:"predict",key:"predict",align:"right",width:100,render:function(e,t,r){var n,a=t.subDataSource,i=a[0].predict.price,s=a[0].predict.date,d=a[0].predict.price,l=a[0].predict.date,o=Object(I.a)(a);try{for(o.s();!(n=o.n()).done;){var u=n.value;u.predict.price<i&&(i=u.predict.price,s=u.predict.date),u.predict.price>d&&(d=u.predict.price,l=u.predict.date)}}catch(p){o.e(p)}finally{o.f()}var j=i===d?i:"".concat(i," - ").concat(d),b=i===d?s:"".concat(s," - ").concat(l);return Object(c.jsxs)("p",{children:[Object(c.jsxs)("span",{children:[j," "]}),Object(c.jsx)("br",{}),Object(c.jsxs)("small",{children:[b," "]})]})}}];var P=function(){var e=b.a.Option,t=Object(n.useState)([]),r=Object(u.a)(t,2),a=r[0],i=r[1];Object(n.useEffect)((function(){s()}),[]);var s=function(){var e=Object(o.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O()({url:k,params:{mode:"stock-list"}}).then((function(e){return e.data}));case 3:t=e.sent,i(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),j.b.error("Search Function will not work");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{style:{width:"100%"},children:Object(c.jsx)("div",{style:{width:"95%",margin:"auto"},children:Object(c.jsxs)(p.a,{children:[Object(c.jsxs)(h.a,{xs:24,sm:24,md:6,lg:6,xl:5,xxl:4,children:[Object(c.jsx)("h1",{children:Object(c.jsx)(x.b,{to:"/",style:{color:"black"},children:"Stocks"})})," "]}),Object(c.jsx)(h.a,{xs:0,sm:0,md:18,lg:18,xl:19,xxl:20,style:{textAlign:"right"},children:Object(c.jsx)(b.a,{showSearch:!0,defaultActiveFirstOption:!1,showArrow:!1,filterOption:function(e,t){return t.symbol.toLowerCase().indexOf(e.toLowerCase())>=0||t.fullName.toLowerCase().indexOf(e.toLowerCase())>=0},filterSort:function(e,t){var r=e.symbol.toLowerCase().localeCompare(t.symbol.toLowerCase());return 0!==r?r:e.fullName.toLowerCase().localeCompare(t.fullName.toLowerCase())},onSelect:function(e){window.location.href="/stocks/"+e},notFoundContent:null,placeholder:"Search...",style:{width:"250px",textAlign:"left"},children:a.map((function(t){return Object(c.jsxs)(e,{value:"".concat(t.country,"/").concat(t.symbol),symbol:t.symbol,fullName:t.fullName,children:[Object(c.jsx)("span",{children:t.symbol}),Object(c.jsx)("br",{}),Object(c.jsx)("small",{children:t.fullName})]},"".concat(t.country,"/").concat(t.symbol))}))})})]})})})},T=function(){var e=Object(n.useState)({}),t=Object(u.a)(e,2),r=t[0],a=t[1];Object(n.useEffect)((function(){i()}),[]);var i=function(){var e=Object(o.a)(d.a.mark((function e(){var t,r,c,n,i,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j.b.loading({content:"Loading...",key:"loading",duration:0}),e.next=4,O.a.get("https://docs.google.com/spreadsheets/u/1/d/e/2PACX-1vQGMwv4tEoSbTjgtSht6LZ5Vxlwb0Y4Lm1z5Pp0tuBcSaZE9AMTY_isyio7Sc-_C8LHsfv_xMptHeqA/pubhtml").then((function(e){return e.data})).then((function(e){return e}));case 4:t=e.sent,r=Object(y.a)(t),c=new Map,(n=r.querySelector("#sheets-viewport")).childNodes.forEach((function(e){c.set(e.id,{id:e.id,key:e.id})})),i=r.querySelector("#sheet-menu"),c.forEach((function(e,t){var r=i.querySelector("#sheet-button-".concat(t)).childNodes[0].innerText;c.set(t,Object(l.a)(Object(l.a)({},c.get(t)),{},{name:r}))})),s={},c.forEach((function(e,t){for(var r=n.querySelector("#".concat(t," table tbody")),c=1;r.childNodes.length-c>1;){var a=r.childNodes[r.childNodes.length-c],i=2;for(i=2;i<a.childNodes.length;i++){var d=a.childNodes[i].innerText.replace(/&quot;/g,'"').replace(/&apos;/g,"'");if(""===d)break;var o=JSON.parse(d);s[e.name]=Object(l.a)(Object(l.a)({},s[e.name]),o)}if(i>2)break;c++}})),a(s),j.b.success({content:"Finish loading",key:"loading",duration:.5}),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0),j.b.error("Something went wrong. Please try again later");case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)("div",{style:{padding:10},children:Object(c.jsxs)(x.a,{basename:"/stocks",children:[Object(c.jsx)(P,{}),Object(c.jsx)("div",{style:{width:"95%",margin:"auto"},children:Object(c.jsxs)(g.c,{children:[Object(c.jsx)(g.a,{exact:!0,path:"/:country/:symbol",component:A}),Object(c.jsx)(g.a,{exact:!0,path:"/",children:Object(c.jsx)(E,{stockData:r})})]})})]})})};r(328);i.a.render(Object(c.jsx)(T,{}),document.getElementById("root"))}},[[330,1,2]]]);
//# sourceMappingURL=main.869289e3.chunk.js.map